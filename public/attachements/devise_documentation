أول حاجة عملتها ظبطت ال gems فى ملف ال GEM File ... بعد كدة عملت bundle install علشان ينزلو فى البروجكت بتاعى 

أنا أشتغلت mysql علشان أشوف شكل الداتابيز فى php my admin

فأكتب الكوماند دة علشان ال gem بتاع mysql يشتغل معاك .... apt-get install -y libmysqlclient-dev

دول السطرين اللى حطتهم فى ال gem file و أى حاجة جديدة حتلاقينى حاطط عليها كومنت كدة .... # Te7a New Edits

gem 'devise'
gem 'mysql2'

*******************

روحت لفولدر ال config ... بعدين فتحت ملف database.yml .... و عدلت فية أسم ال databse و ال username و ال pw و ال adapter 

عدل أنت برحتك باللى يناسبك 

********************** 
ندى نبذة بسيطة عن ال devise ... و دة gem مسؤل عن ال authentication و ال social media links  و حجات تنية تقدر تقراها من هنا :- 
https://github.com/plataformatec/devise
ال gem اللى اسمة ال active admin بيستخدم ال devise فى ال authentication .

فدلوقتى قدمنا أختيارين يا نخلى كل ال users فى جدول واحد ... يا أمت نفصل ال admin عن ال user العادى ... الأسهل طبعا نفصلهم و دة اللى أنا عملتة 

المهم لو مثلا عايزين نعمل  حاجة شبة ال admin area ... اللى عملناها فى اللاب ... و عايزين كمان نخلى ال user يعمل registration مش بس بال email و ال pw ... لا كمان نخلية بيقدر يعمل registration لل age أو أى حاجة تنية .

فالسؤال هنا ... قين ملفات ال devise ... أو بمعنى أصح فين ملفات ال controller و ال views اللى حعدل فيها !!!؟؟؟ 

********************* 

سعتها حنرجع لل documentation ..و أمشى معاها خطوة خطوة . 

و أول خطوة أنا عملتها هى دية .... rails generate devise:install

و دية زى معناها أنا بهئ ال project بتاعى ب configuration لل gem اللى اسمة devise ... و بقول يا بروجكت خد بالك أنا حبدأ أعدل فى ال behaviour الأصلى بتاع ال gem اللى أسمها devise 

الكوماند اللى فات ... روح لفولدر ال config ... بعدين ال initializer ... بعدين حتلاقى ملف أسمة devise.rb ... بوص علية و اقفلة تانى مش حنستعملة 

******************** 

دلوقتى بقى أنا عايزز أعمل ال model و ال view و ال controllers بتوع ال devise . فحنعمل كدة . 
rails generate devise Te7aModel

دة عمل ملف migration روح بوص علية ... و فية ملف حتلاقية أتحط فى فولدر ال model . 

بعد كدة rake db:create .... بعدين rake db:migrate  و روح شوف ال databse بتعتك عاملة أزاى

دلوقتى أنا عايز أضيف column لل age فعملت ملف migrtion جديد ... بالكوماند دة 

rails g migration add_age_to_te7aModel

حتلاقى الملف فى فولدر ال db ... جوة فولدر ال migrate

و بعدين فتحتة و كتبت جواة السطر اللى أنت شايفة ... بعد كدة rake db:migrate

**********************
كدة ظبطنا ال model ... نظبط ال controllers و ال view ... بالكوماندين دول ورا بعض 
rails generate devise:views te7a

rails generate devise:controllers te7as

طبعا أنت تقدر تسمى أى أسم ... و متنساش أسم ال controller بيبقى جمع .
دلوقتى حتلاقى فلدرات جديدة فى ال controller و ال view ... بنفس الأسم ... te7a و te7as

******************
دلوقتى أكتب الكوماند دة ... rake routes ... بوص على العمود التالت على اليمين ... طبعا مفهتهمش كلهم ... متقلقش دة الطبيعى . 

المهم روح لملف ال route.rb ... و شيل  ..و أكتب فية كدة 
  devise_for :te7aModel, controllers: { sessions: "te7as/sessions" , registrations: "te7as/registrations" }

بعدين أكتب كوماند rake routes تانى و قارنه بالنتيجة اللى طلعلتلك قبل كدة حتلاقى بعض التغيرات. 


طب أية اللى حصل ... من الأخر أنا بقول يا بروجكت متبصش على الطريق الأساسى بتاع ال gem اللى اسمه devise ... و بوص على الطرق اللى كتبتهالك دية ... يعنى متنفذش أى controller و action ... متعلقين بال sessions أو ال registration ... بتوع ال devise

و تعالى نفذ الحجات اللى عندى أنا . 

***************************

لعبنا حيبقى مع الملفات دية ... registrations_controller و ال registrations/new.html.erbو te7a_model.rb ... دول كدة ال minimum للمشروع بس أنت تقدر تقرى فى ال documentation و تعدل اللى أنت عايزة 

روح أفتح registrations/new.html.erb .. و أكتب فية أى حاجة أنت عايزها زى <h1 > hello my friend </h1

بعدين rails s ... و أكتب فى ال url كدة 
http://localhost:3000/te7a_models/sign_in

و روح على ال registraion ... و شوف التغيير . 

دلوقتى لو كتبت email و ال pw ... و عملت registration حتتحط ... بس فاضل نضيف ال كولم بتاع ال age حعملها كدة . 


***************** 

روح لل registrations_controller ... بعد كدة . حتلاقى فية ... سطر معموله هاش أولة  before_action :configure_sign_up_params, only: [:create]

و أنزل تحت حتلاقى method أسمها configure_singup_params ... بردو شيل الهاش وشيل السطر اللى جواها كمان و حط دة مكانه . 

devise_parameter_sanitizer.for(:sign_up) << :age

معناها كدة أنا بضيف ال age ... علشان اقدر أنادى علية من ال view... و كمان علشان يحط القيمة دية فى ال databse لما أدوس submit . 

 بعدين نروح لل registrations/new.html.erb و أكتب فية بقى الحاجة اللى عايز أضفها جديدة >> 

<div class="field">
      <%= f.label :age %><br />
      <%= f.text_field :age, autofocus: true %>
    </div>


نجرب بقى rails s ... و نعمل registration . 
************ 
دلوقتى عندنا مشكلتين .. .الأولى لو كتبنا أسم فى ال age ... حلاقية اشتغل عادى ... و دية حنحلها بال validation ... أعمل search 

التنية بقى أنت مش حتعرف تروح لل sign in تانى ... لية بقى لأن بمجرد لما عملت registration بقى معمولك session ... و دية مبتروحش غير لما تقفل ال brwoser ... فالحل السريع . 

rails g controller te7a welcome 
بعدي رحت لل route.rb ... و عرفت ال root بتاعى 

بعد كدة حطيت لينك لل sign out و ال sign in ... فى application.html.erb ... اللى جوة ال layout روح بوص عليهم ... و شوف مكتوبين أزاى . 

*************
أخر حاجتين بوص على شوية ال conditions ... و ال methods اللى استخدمتها لأن دية ممكن تستفاد منها فى ظهور لينكات معينة ... و تخفى لينكات معينة تنية . و خد بالك من أسمهم كويس ... لأن أسمهم بيبقى بناء على الكوماند بتاع rails generate devise Te7aModel

و أى حاجة تقف فيها ... بوص على ال documentation 










